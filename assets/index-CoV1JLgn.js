import{k as m,u as r,r as x,j as e,W as h,B as p}from"./index-CGi-Suzj.js";import{u as j,h as g}from"./hooks-Cuu2-Frd.js";import{B as f}from"./badge-DLrqGHpA.js";import{C as v,a as D,b as C,d as w,c as N,e as M}from"./card-cqz_ZksU.js";import{D as b,a as q,E as y,b as R,c as S,d as i,e as E}from"./dropdown-menu-BQ24iNsp.js";import{u as B}from"./hooks-D4I9jU-y.js";import"./index-CNoRdSBJ.js";function A(){const d=m(),{handling:l,requests:a,getRequests:c,deleteRequest:o}=j(r(s=>({handling:s.handling,requests:s.data,getRequests:s.getRequests,deleteRequest:s.deleteRequest}))),{devices:t,getDevices:u}=B(r(s=>({devices:s.data,getDevices:s.getDevices})));return x.useEffect(()=>{Object.keys(a).length||c(),Object.keys(t).length||u()},[]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l?e.jsx(h,{}):null,e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Maintenance Management"})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Object.values(a).map(s=>{var n;return e.jsxs(v,{children:[e.jsxs(D,{children:[e.jsxs(C,{children:[s.type.toUpperCase()," - ",(n=t[s.deviceId])==null?void 0:n.name]}),e.jsx(w,{children:s.description})]}),e.jsx(N,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{variant:s.status==="Completed"?"default":s.status==="In Progress"?"secondary":s.status==="Scheduled"?"outline":"destructive",children:s.status.toUpperCase()}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Date create: ",g(s.createdDate).format("DD/MM/YYYY")]})]})}),e.jsx(M,{className:"flex justify-end",children:e.jsxs(b,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(p,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(y,{className:"h-4 w-4"})]})}),e.jsxs(R,{align:"end",children:[e.jsx(S,{children:"Actions"}),e.jsx(i,{onSelect:()=>d(`/request/${s.id}`),children:"View Details"}),e.jsx(E,{}),e.jsx(i,{className:"text-red-600",onSelect:()=>o(s.id),children:"Cancel Task"})]})]})})]},s.id)})})]})}export{A as default};
