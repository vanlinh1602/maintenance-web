import{l as c,t as n,m as d,n as s,o as l}from"./index-CGi-Suzj.js";const o=async()=>{try{const t=await c.get("/devices/get/all");if(t.kind==="ok")return t.data;throw t}catch(t){return n({title:"Error",description:d(t),variant:"destructive"}),[]}},v=async t=>{try{const e=await c.get(`/devices/get/${t}`);if(e.kind==="ok")return e.data;throw e}catch(e){return n({title:"Error",description:d(e),variant:"destructive"}),null}},u=async t=>{try{const e=await c.post("/devices/create",{device:t});if(e.kind==="ok")return e.data;throw e}catch(e){return n({title:"Error",description:d(e),variant:"destructive"}),null}},f=async(t,e)=>{try{const a=await c.post("/devices/update",{id:t,device:e});if(a.kind==="ok")return a.data;throw a}catch(a){return n({title:"Error",description:d(a),variant:"destructive"}),null}},p=async t=>{try{const e=await c.post("/devices/delete",{id:t});if(e.kind==="ok")return!0;throw e}catch(e){return n({title:"Error",description:d(e),variant:"destructive"}),!1}},y={handling:!1,data:{}},D=s()(l(t=>({...y,getDevices:async()=>{t({handling:!0},!1,{type:"device/getDevices"});const e=await o();t(a=>({data:{...a.data,...e.reduce((i,r)=>(i[r.id]=r,i),{})},handling:!1}),!1,{type:"device/getDevices"})},getDevice:async e=>{t({handling:!0},!1,{type:"device/getDevice"});const a=await v(e);a?t(i=>({data:{...i.data,[a.id]:a},handling:!1}),!1,{type:"device/getDevice"}):t({handling:!1},!1,{type:"device/getDevice"})},createDevice:async e=>{t({handling:!0},!1,{type:"device/createDevice"});const a=await u(e);a?t(i=>({data:{...i.data,[a.id]:a},handling:!1}),!1,{type:"device/createDevice"}):t({handling:!1},!1,{type:"device/createDevice"})},updateDevice:async(e,a)=>{t({handling:!0},!1,{type:"device/updateDevice"}),await f(e,a)?t(r=>({data:{...r.data,[e]:{...r.data[e],...a}},handling:!1}),!1,{type:"device/updateDevice"}):t({handling:!1},!1,{type:"device/updateDevice"})},deleteDevice:async e=>{t({handling:!0},!1,{type:"device/deleteDevice"}),await p(e)?t(i=>{const r={...i.data};return delete r[e],{data:r,handling:!1}},!1,{type:"device/deleteDevice"}):t({handling:!1},!1,{type:"device/deleteDevice"})}})));export{D as u};
