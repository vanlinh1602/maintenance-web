import{c as v,u as w,a as D,b as d,d as C,r as f,j as e,M as S}from"./index-CfFH1LjD.js";import{u as L,h as j}from"./hooks-wJSTJ-Ih.js";import{C as r,a as o,b as m,c as u,d as R}from"./card-DN_1rcS3.js";import{u as Y}from"./hooks-DvHM9WGX.js";import{u as T}from"./hooks-ceS6wIrN.js";/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=v("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=v("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=v("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=v("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),A=(i,l)=>{switch(i.status){case"inProgress":case"approved":return e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"mr-2 h-4 w-4 text-blue-500"}),e.jsxs("div",{className:"ml-4 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:l}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]}),e.jsx("div",{className:"ml-auto font-medium text-blue-500",children:"In Progress"})]});case"pending":return e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"mr-2 h-4 w-4 text-yellow-500"}),e.jsxs("div",{className:"ml-4 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:l}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Scheduled for:"," ",j(i.scheduledDate||void 0).format("DD MMM YYYY")]})]}),e.jsx("div",{className:"ml-auto font-medium text-yellow-500",children:"Pending"})]});case"completed":return e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"mr-2 h-4 w-4 text-blue-500"}),e.jsxs("div",{className:"ml-4 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:l}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Completed on:"," ",j(i.completedDate).format("DD MMM YYYY")]})]}),e.jsx("div",{className:"ml-auto font-medium text-green-500",children:"Completed"})]});default:return null}};function H(){const i=w(),{isManager:l}=D(d(s=>({isManager:s.isManager}))),{devices:x,getDevices:M}=L(d(s=>({devices:s.data,getDevices:s.getDevices}))),{requests:h,getRequests:k}=T(d(s=>({requests:s.data,getRequests:s.getRequests}))),{liquidations:y,getLiquidations:b}=Y(d(s=>({liquidations:s.data,getLiquidations:s.getLiquidations}))),{requestTypes:q}=C(d(s=>({requestTypes:s.data.request.type})));f.useEffect(()=>{l?(M(),k(),b()):i("/device")},[]);const t=f.useMemo(()=>{const s=Object.values(x).length,c=Object.values(x).filter(n=>n.status==="active").length,a=Object.values(h).filter(n=>n.status==="approved").length,p=Object.values(y).filter(n=>n.status==="approved").length;return{totalDevice:s,activeDevice:c,requsetsStatus:a,liquidationStatus:p}},[x,y,h]),N=f.useMemo(()=>Object.values(h).sort((c,a)=>j(a.updatedAt).unix()-j(c.updatedAt).unix()).slice(0,3),[h]);return console.log("requestList",N),e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-900",children:e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(r,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Device"}),e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalDevice}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total equipment in the system"})]})]}),e.jsxs(r,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Active Device"}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.activeDevice}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(t.activeDevice*100/t.totalDevice),"% of total equipment"]})]})]}),e.jsxs(r,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"In Maintenance"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.requsetsStatus}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(t.requsetsStatus*100/t.totalDevice),"% of total equipment"]})]})]}),e.jsxs(r,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Liquidation"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.liquidationStatus}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(t.liquidationStatus*100/t.totalDevice),"% of total equipment"]})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-7 mt-6",children:e.jsxs(r,{className:"col-span-7",children:[e.jsxs(o,{children:[e.jsx(m,{children:"Recent Maintenance Tasks"}),e.jsx(R,{children:"Latest updates on equipment maintenance"})]}),e.jsx(u,{children:e.jsx("div",{className:"space-y-8",children:N.map(s=>{var a,p;const c=`${(a=q[s.type])==null?void 0:a.name} - ${(p=x[s.deviceId])==null?void 0:p.name}`;return e.jsx("div",{children:A(s,c)},s.id)})})})]})})]})})}export{H as default};
