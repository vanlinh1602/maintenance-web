import{u as b,f as a,h as C,e as D,r as l,j as e,W as N,q as y,s as M,B as R,v as A,w as T,x,y as E}from"./index-DVFDKlcv.js";import{u as B,h as F}from"./hooks-28YVt9aP.js";import{r as i,B as O}from"./options-YKJpdElC.js";import{C as Y,a as I,b as V,d as W,c as H,e as L}from"./card-PyWpcb_t.js";import{S as P,a as U,b as $,c as z,d as h}from"./select-Bn3wcZhV.js";import{u as G}from"./hooks-CYUBZkOm.js";import{E as J}from"./ellipsis-bOgJXUvn.js";function se(){const j=b(),{handling:p,requests:c,getRequests:g,deleteRequest:f}=G(a(s=>({handling:s.handling,requests:s.data,getRequests:s.getRequests,deleteRequest:s.deleteRequest}))),{devices:d,getDevices:v}=B(a(s=>({devices:s.data,getDevices:s.getDevices}))),{requestType:S}=C(a(s=>({requestType:s.data.request.type}))),{userInfo:r}=D(a(s=>({userInfo:s.info}))),[n,q]=l.useState("All"),w=l.useMemo(()=>Object.values(c).filter(s=>n==="All"?!0:s.status===n),[c,n]);return l.useEffect(()=>{g(),Object.keys(d).length||v()},[]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p?e.jsx(N,{}):null,e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Maintenance Management"})}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(P,{onValueChange:s=>q(s),children:[e.jsx(U,{className:"w-[180px] bg-white",children:e.jsx($,{placeholder:"Filter by status"})}),e.jsxs(z,{children:[e.jsx(h,{value:"All",children:"All"}),Object.entries(i).map(([s,t])=>e.jsx(h,{value:s,children:t.name},s))]})]})})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:w.map(s=>{var t,o,u,m;return e.jsxs(Y,{children:[e.jsxs(I,{children:[e.jsxs(V,{children:[(t=S[s.type])==null?void 0:t.name," - ",(o=d[s.deviceId])==null?void 0:o.name]}),e.jsx(W,{children:s.description})]}),e.jsx(H,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(O,{style:{backgroundColor:(u=i[s.status])==null?void 0:u.color},children:(m=i[s.status])==null?void 0:m.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Date create: ",F(s.createdAt).format("DD/MM/YYYY")]})]})}),e.jsx(L,{className:"flex justify-end",children:e.jsxs(y,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(R,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(J,{className:"h-4 w-4"})]})}),e.jsxs(A,{align:"end",children:[e.jsx(T,{children:"Actions"}),e.jsx(x,{onSelect:()=>j(`/request/${s.id}`),children:"View Details"}),s.creator===(r==null?void 0:r.id.toString())?e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsx(x,{className:"text-red-600",onSelect:()=>f(s.id),children:"Cancel Task"})]}):null]})]})})]},s.id)})})]})}export{se as default};
